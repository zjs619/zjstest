'use strict'

import jsonFormat from 'json-format'
import jsonminify from 'jsonminify'

import { parseFromCSV, writeFile } from '../common/util'

// Constants:
const T_COMPILE = 'Total compiling time'

const format = (data) => jsonFormat(
  data,
  { type: 'space', size: 2 },
)

console.time(T_COMPILE)

void (async () => {
  const iconData = await parseFromCSV('./md/icon-list.csv')
  const icon = format(iconData)

  writeFile('./md/icon-list.json', icon)
  writeFile('./md/icon-list.min.json', jsonminify(icon))
  console.timeEnd(T_COMPILE)
})()
